{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kakaireemmanuel/Documents/projects/React/ah-frontend-targaryen/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kakaireemmanuel/Documents/projects/React/ah-frontend-targaryen/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { toast } from 'react-toastify';\nimport { REGISTER_USER_SUCCESS, REGISTER_USER_ERROR, LOGIN_USER_SUCCESS, LOGIN_USER_ERROR } from './types';\nimport axiosInstance from '../config/axiosInstance';\nexport var fetchUsers = function fetchUsers(postData) {\n  return function (dispatch) {\n    toast.dismiss();\n    axiosInstance.post('/api/users/', postData).then(function (response) {\n      localStorage.setItem('auth_token', response.data.user.auth_token);\n      dispatch({\n        type: REGISTER_USER_SUCCESS,\n        payload: true\n      });\n      toast.success('Signup successful', {\n        autoClose: 3500,\n        hideProgressBar: true\n      });\n    }).catch(function (error) {\n      var errorMessage = '';\n      Object.keys(error.response.data.errors).forEach(function (key) {\n        if (Object.prototype.hasOwnProperty.call(error.response.data.errors, key)) {\n          errorMessage += \"\\n\".concat(key, \": \").concat(error.response.data.errors[key][0]);\n        }\n      });\n      dispatch({\n        type: REGISTER_USER_ERROR,\n        payload: errorMessage\n      });\n      toast.error(errorMessage, {\n        autoClose: false,\n        hideProgressBar: true\n      });\n    });\n  };\n};\nexport var loginUser = function loginUser(payload) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                toast.dismiss();\n                axiosInstance.post('/api/users/login/', payload).then(function (response) {\n                  localStorage.setItem('token', response.data.user.auth_token);\n                  dispatch({\n                    type: LOGIN_USER_SUCCESS,\n                    payload: true\n                  });\n                  toast.success('Logged In!', {\n                    autoClose: 3500,\n                    hideProgressBar: true\n                  }, {\n                    position: toast.POSITION.TOP_CENTER\n                  });\n                }).catch(function (error) {\n                  dispatch({\n                    type: LOGIN_USER_ERROR,\n                    payload: error.response.data.errors.error[0]\n                  });\n                  toast.error(\"\".concat(error.response.data.errors.error), {\n                    autoClose: false\n                  }, {\n                    position: toast.POSITION.TOP_CENTER\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};","map":{"version":3,"sources":["/Users/kakaireemmanuel/Documents/projects/React/ah-frontend-targaryen/src/actions/userActions.js"],"names":["toast","REGISTER_USER_SUCCESS","REGISTER_USER_ERROR","LOGIN_USER_SUCCESS","LOGIN_USER_ERROR","axiosInstance","fetchUsers","postData","dispatch","dismiss","post","then","response","localStorage","setItem","data","user","auth_token","type","payload","success","autoClose","hideProgressBar","catch","error","errorMessage","Object","keys","errors","forEach","key","prototype","hasOwnProperty","call","loginUser","position","POSITION","TOP_CENTER"],"mappings":"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","sourcesContent":["import { toast } from 'react-toastify';\nimport {\n  REGISTER_USER_SUCCESS,\n  REGISTER_USER_ERROR,\n  LOGIN_USER_SUCCESS,\n  LOGIN_USER_ERROR,\n} from './types';\nimport axiosInstance from '../config/axiosInstance';\n\nexport const fetchUsers = (postData) => dispatch => {\n  toast.dismiss();\n  axiosInstance\n    .post('/api/users/', postData)\n    .then((response) => {\n      localStorage.setItem('auth_token', response.data.user.auth_token);\n      dispatch({ type: REGISTER_USER_SUCCESS, payload: true });\n      toast.success('Signup successful', { autoClose: 3500, hideProgressBar: true });\n    })\n    .catch((error) => {\n      let errorMessage = '';\n\n      Object.keys(error.response.data.errors).forEach((key) => {\n        if (Object.prototype.hasOwnProperty.call(error.response.data.errors, key)) {\n          errorMessage += (`\\n${key}: ${error.response.data.errors[key][0]}`);\n        }\n      });\n\n      dispatch({ type: REGISTER_USER_ERROR, payload: errorMessage });\n      toast.error(errorMessage, { autoClose: false, hideProgressBar: true });\n    });\n};\n\nexport const loginUser = payload => async dispatch => {\n  toast.dismiss();\n  axiosInstance\n    .post('/api/users/login/', payload)\n    .then(response => {\n      localStorage.setItem('token', response.data.user.auth_token);\n      dispatch({ type: LOGIN_USER_SUCCESS, payload: true });\n      toast.success(\n        'Logged In!',\n        { autoClose: 3500, hideProgressBar: true },\n        {\n          position: toast.POSITION.TOP_CENTER,\n        },\n      );\n    })\n    .catch(error => {\n      dispatch({\n        type: LOGIN_USER_ERROR,\n        payload: error.response.data.errors.error[0],\n      });\n      toast.error(\n        `${error.response.data.errors.error}`,\n        { autoClose: false },\n        {\n          position: toast.POSITION.TOP_CENTER,\n        },\n      );\n    });\n};\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kakaireemmanuel/Documents/projects/React/ah-frontend-targaryen/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kakaireemmanuel/Documents/projects/React/ah-frontend-targaryen/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { toast } from 'react-toastify';\nimport { REGISTER_USER_SUCCESS, REGISTER_USER_ERROR, LOGIN_USER_SUCCESS, LOGIN_USER_ERROR } from './types';\nimport { socialLoginInitiated, socialLoginSuccess } from './actionCreators';\nimport axiosInstance from '../config/axiosInstance';\nexport var fetchUsers = function fetchUsers(postData) {\n  return function (dispatch) {\n    toast.dismiss();\n    axiosInstance.post('/api/users/', postData).then(function (response) {\n      localStorage.setItem('auth_token', response.data.user.auth_token);\n      dispatch({\n        type: REGISTER_USER_SUCCESS,\n        payload: true\n      });\n      toast.success('Signup successful', {\n        autoClose: 3500,\n        hideProgressBar: true\n      });\n    }).catch(function (error) {\n      var errorMessage = '';\n      Object.keys(error.response.data.errors).forEach(function (key) {\n        if (Object.prototype.hasOwnProperty.call(error.response.data.errors, key)) {\n          errorMessage += \"\\n\".concat(key, \": \").concat(error.response.data.errors[key][0]);\n        }\n      });\n      dispatch({\n        type: REGISTER_USER_ERROR,\n        payload: errorMessage\n      });\n      toast.error(errorMessage, {\n        autoClose: false,\n        hideProgressBar: true\n      });\n    });\n  };\n};\nexport var loginUser = function loginUser(payload) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                toast.dismiss();\n                axiosInstance.post('/api/users/login/', payload).then(function (response) {\n                  localStorage.setItem('token', response.data.user.auth_token);\n                  dispatch({\n                    type: LOGIN_USER_SUCCESS,\n                    payload: true\n                  });\n                  toast.success('Logged In!', {\n                    autoClose: 3500,\n                    hideProgressBar: true\n                  }, {\n                    position: toast.POSITION.TOP_CENTER\n                  });\n                }).catch(function (error) {\n                  dispatch({\n                    type: LOGIN_USER_ERROR,\n                    payload: error.response.data.errors.error[0]\n                  });\n                  toast.error(\"\".concat(error.response.data.errors.error), {\n                    autoClose: false\n                  }, {\n                    position: toast.POSITION.TOP_CENTER\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var googleLoginUser = function googleLoginUser(serviceProvider, userData) {\n  return function (dispatch) {\n    dispatch(socialLoginInitiated(true));\n    return axiosInstance.post(serviceProvider, userData).then(function (res) {\n      localStorage.setItem('auth_token', res.data.user.access_token);\n      dispatch(socialLoginSuccess(res.data.user.access_token));\n      console.log(res.data.user.access_token);\n    }).catch(function (error) {\n      toast.error(error, {\n        autoClose: 3500,\n        hideProgressBar: true\n      }, {\n        position: toast.POSITION.TOP_CENTER\n      });\n    });\n  };\n};\nexport var facebookLoginUser = function facebookLoginUser(serviceProvider, userData) {\n  return function (dispatch) {\n    dispatch(socialLoginInitiated(true));\n    return axiosInstance.post(serviceProvider, userData).then(function (res) {\n      localStorage.setItem('auth_token', res.data.user.access_token);\n      dispatch(socialLoginSuccess(tru));\n    }).catch(function (error) {\n      return error;\n    });\n  };\n};","map":{"version":3,"sources":["/Users/kakaireemmanuel/Documents/projects/React/ah-frontend-targaryen/src/actions/userActions.js"],"names":["toast","REGISTER_USER_SUCCESS","REGISTER_USER_ERROR","LOGIN_USER_SUCCESS","LOGIN_USER_ERROR","socialLoginInitiated","socialLoginSuccess","axiosInstance","fetchUsers","postData","dispatch","dismiss","post","then","response","localStorage","setItem","data","user","auth_token","type","payload","success","autoClose","hideProgressBar","catch","error","errorMessage","Object","keys","errors","forEach","key","prototype","hasOwnProperty","call","loginUser","position","POSITION","TOP_CENTER","googleLoginUser","serviceProvider","userData","res","access_token","console","log","facebookLoginUser","tru"],"mappings":"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","sourcesContent":["import { toast } from 'react-toastify';\nimport {\n  REGISTER_USER_SUCCESS,\n  REGISTER_USER_ERROR,\n  LOGIN_USER_SUCCESS,\n  LOGIN_USER_ERROR,\n} from './types';\nimport {\n  socialLoginInitiated,\n  socialLoginSuccess,\n} from './actionCreators';\nimport axiosInstance from '../config/axiosInstance';\n\n\nexport const fetchUsers = (postData) => dispatch => {\n  toast.dismiss();\n  axiosInstance\n    .post('/api/users/', postData)\n    .then((response) => {\n      localStorage.setItem('auth_token', response.data.user.auth_token);\n      dispatch({ type: REGISTER_USER_SUCCESS, payload: true });\n      toast.success('Signup successful', { autoClose: 3500, hideProgressBar: true });\n    })\n    .catch((error) => {\n      let errorMessage = '';\n\n      Object.keys(error.response.data.errors).forEach((key) => {\n        if (Object.prototype.hasOwnProperty.call(error.response.data.errors, key)) {\n          errorMessage += (`\\n${key}: ${error.response.data.errors[key][0]}`);\n        }\n      });\n\n      dispatch({ type: REGISTER_USER_ERROR, payload: errorMessage });\n      toast.error(errorMessage, { autoClose: false, hideProgressBar: true });\n    });\n};\n\nexport const loginUser = payload => async dispatch => {\n  toast.dismiss();\n  axiosInstance\n    .post('/api/users/login/', payload)\n    .then(response => {\n      localStorage.setItem('token', response.data.user.auth_token);\n      dispatch({ type: LOGIN_USER_SUCCESS, payload: true });\n      toast.success(\n        'Logged In!',\n        { autoClose: 3500, hideProgressBar: true },\n        {\n          position: toast.POSITION.TOP_CENTER,\n        },\n      );\n    })\n    .catch(error => {\n      dispatch({\n        type: LOGIN_USER_ERROR,\n        payload: error.response.data.errors.error[0],\n      });\n      toast.error(\n        `${error.response.data.errors.error}`,\n        { autoClose: false },\n        {\n          position: toast.POSITION.TOP_CENTER,\n        },\n      );\n    });\n};\n\nexport const googleLoginUser = (serviceProvider, userData) => (dispatch) => {\n  dispatch(socialLoginInitiated(true));\n  return axiosInstance.post(serviceProvider, userData)\n    .then((res) => {\n      localStorage.setItem('auth_token', res.data.user.access_token);\n      dispatch(socialLoginSuccess(res.data.user.access_token));\n      console.log(res.data.user.access_token)\n    })\n    .catch((error) => {\n      toast.error(error, { autoClose: 3500, hideProgressBar: true }, {\n        position: toast.POSITION.TOP_CENTER,\n      });\n    });\n};\n\nexport const facebookLoginUser = (serviceProvider, userData) => (dispatch) => {\n  dispatch(socialLoginInitiated(true));\n  return axiosInstance.post(serviceProvider, userData)\n    .then((res) => {\n      localStorage.setItem('auth_token', res.data.user.access_token);\n      dispatch(socialLoginSuccess(tru));\n    })\n    .catch((error) => error);\n};\n"]},"metadata":{},"sourceType":"module"}